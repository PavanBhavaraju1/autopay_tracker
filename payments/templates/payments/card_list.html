{% extends "payments/base.html" %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h2>Cards</h2>
  <div>
    <a href="{% url 'dashboard' %}" class="btn btn-outline-secondary me-2">Home</a>
    <a href="{% url 'add-card' %}" class="btn btn-success">Add Card</a>
  </div>
</div>

<!-- Bulk delete form -->
<form method="post" action="{% url 'bulk-delete-cards' %}" class="mb-3">
  {% csrf_token %}
  <ul class="list-group">
    {% for card in cards %}
    <li class="list-group-item d-flex justify-content-between align-items-center">
      <div class="form-check">
        <input class="form-check-input" type="checkbox" name="card_ids" value="{{ card.pk }}" id="card{{ card.pk }}">
        <label class="form-check-label" for="card{{ card.pk }}">
          {{ card.name }} •••• {{ card.last4 }}{% if not card.is_active %} (inactive){% endif %}
        </label>
      </div>
      <a href="{% url 'delete-card' card.pk %}" class="btn btn-sm btn-outline-danger">Delete</a>
    </li>
    {% empty %}
    <li class="list-group-item">No cards yet. Add one.</li>
    {% endfor %}
  </ul>
  {% if cards %}
  <button type="submit" class="btn btn-danger mt-2" onclick="return confirm('Delete selected cards?')">Delete Selected</button>
  {% endif %}
</form>
{% endblock %}
